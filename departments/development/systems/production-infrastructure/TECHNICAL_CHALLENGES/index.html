
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://minor-league-esports.github.io/knowledgeBase/departments/development/systems/production-infrastructure/TECHNICAL_CHALLENGES/">
      
      
        <link rel="prev" href="../POSTMORTEM/">
      
      
        <link rel="next" href="../GIT_HISTORY_ANALYSIS/">
      
      
      <link rel="icon" href="../../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>Technical Challenges - Knowledge Base</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="yellow" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#technical-challenges-and-solutions" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../.." title="Knowledge Base" class="md-header__button md-logo" aria-label="Knowledge Base" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Knowledge Base
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Technical Challenges
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/minor-league-esports/knowledgeBase" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="Knowledge Base" class="md-nav__button md-logo" aria-label="Knowledge Base" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Knowledge Base
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/minor-league-esports/knowledgeBase" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Departments
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Departments
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../rocket-league-operations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rocket League Operations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../trackmania-operations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Trackmania Operations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../community/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Community
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" checked>
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Development
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Development
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../new-team-members/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    New Team Members
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_3" checked>
        
          
          <label class="md-nav__link" for="__nav_2_4_3" id="__nav_2_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Systems
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_4_3">
            <span class="md-nav__icon md-icon"></span>
            Systems
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../systems-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../modmail/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modmail KB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sprocket-identity-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sprocket Identity System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_3_4" checked>
        
          
          <label class="md-nav__link" for="__nav_2_4_3_4" id="__nav_2_4_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Production Infrastructure
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_4_3_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_4_3_4">
            <span class="md-nav__icon md-icon"></span>
            Production Infrastructure
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_3_4_2" >
        
          
          <label class="md-nav__link" for="__nav_2_4_3_4_2" id="__nav_2_4_3_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_4_3_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_3_4_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../00-START-HERE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quick Start
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../README.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    README
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CONTEXT_SUMMARY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Context Summary
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_3_4_3" >
        
          
          <label class="md-nav__link" for="__nav_2_4_3_4_3" id="__nav_2_4_3_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Architecture & Design
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_4_3_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_3_4_3">
            <span class="md-nav__icon md-icon"></span>
            Architecture & Design
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ARCHITECTURE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../GLOSSARY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Glossary
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_3_4_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4_3_4_4" id="__nav_2_4_3_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Deployment & Operations
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_4_3_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_3_4_4">
            <span class="md-nav__icon md-icon"></span>
            Deployment & Operations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DEPLOYMENT_GUIDE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deployment Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OPERATIONS_RUNBOOK/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Operations Runbook
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../EXTERNALITIES_AND_DEPENDENCIES/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Externalities & Dependencies
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_3_4_5" checked>
        
          
          <label class="md-nav__link" for="__nav_2_4_3_4_5" id="__nav_2_4_3_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Project History
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_4_3_4_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_4_3_4_5">
            <span class="md-nav__icon md-icon"></span>
            Project History
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../POSTMORTEM/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Postmortem
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Technical Challenges
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Technical Challenges
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#challenge-1-vault-bootstrapping-and-unsealing" class="md-nav__link">
    <span class="md-ellipsis">
      Challenge 1: Vault Bootstrapping and Unsealing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Challenge 1: Vault Bootstrapping and Unsealing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-problem" class="md-nav__link">
    <span class="md-ellipsis">
      The Problem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#symptoms" class="md-nav__link">
    <span class="md-ellipsis">
      Symptoms
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evolution-through-commits" class="md-nav__link">
    <span class="md-ellipsis">
      Evolution Through Commits
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#solution" class="md-nav__link">
    <span class="md-ellipsis">
      Solution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lessons-learned" class="md-nav__link">
    <span class="md-ellipsis">
      Lessons Learned
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#challenge-2-database-management-vs-managed-services" class="md-nav__link">
    <span class="md-ellipsis">
      Challenge 2: Database Management vs. Managed Services
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Challenge 2: Database Management vs. Managed Services">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-problem_1" class="md-nav__link">
    <span class="md-ellipsis">
      The Problem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-decision-point" class="md-nav__link">
    <span class="md-ellipsis">
      The Decision Point
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-solution" class="md-nav__link">
    <span class="md-ellipsis">
      The Solution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#impact" class="md-nav__link">
    <span class="md-ellipsis">
      Impact
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lessons-learned_1" class="md-nav__link">
    <span class="md-ellipsis">
      Lessons Learned
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#challenge-3-storage-backend-evolution-minio-s3" class="md-nav__link">
    <span class="md-ellipsis">
      Challenge 3: Storage Backend Evolution (MinIO → S3)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Challenge 3: Storage Backend Evolution (MinIO → S3)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-problem_2" class="md-nav__link">
    <span class="md-ellipsis">
      The Problem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timeline" class="md-nav__link">
    <span class="md-ellipsis">
      Timeline
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#solution_1" class="md-nav__link">
    <span class="md-ellipsis">
      Solution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lessons-learned_2" class="md-nav__link">
    <span class="md-ellipsis">
      Lessons Learned
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#challenge-4-routing-complexity-localhost-lan-cloud" class="md-nav__link">
    <span class="md-ellipsis">
      Challenge 4: Routing Complexity (Localhost, LAN, Cloud)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Challenge 4: Routing Complexity (Localhost, LAN, Cloud)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-problem_3" class="md-nav__link">
    <span class="md-ellipsis">
      The Problem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#symptoms_1" class="md-nav__link">
    <span class="md-ellipsis">
      Symptoms
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evolution" class="md-nav__link">
    <span class="md-ellipsis">
      Evolution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#solution_2" class="md-nav__link">
    <span class="md-ellipsis">
      Solution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lessons-learned_3" class="md-nav__link">
    <span class="md-ellipsis">
      Lessons Learned
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#challenge-5-secret-management-across-vault-and-doppler" class="md-nav__link">
    <span class="md-ellipsis">
      Challenge 5: Secret Management Across Vault and Doppler
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Challenge 5: Secret Management Across Vault and Doppler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-problem_4" class="md-nav__link">
    <span class="md-ellipsis">
      The Problem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#challenges" class="md-nav__link">
    <span class="md-ellipsis">
      Challenges
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#solution-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Solution Architecture
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secret-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Secret Flow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lessons-learned_4" class="md-nav__link">
    <span class="md-ellipsis">
      Lessons Learned
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#challenge-6-service-discovery-and-traefik-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Challenge 6: Service Discovery and Traefik Integration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Challenge 6: Service Discovery and Traefik Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-problem_5" class="md-nav__link">
    <span class="md-ellipsis">
      The Problem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#symptoms_2" class="md-nav__link">
    <span class="md-ellipsis">
      Symptoms
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#root-causes" class="md-nav__link">
    <span class="md-ellipsis">
      Root Causes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#solution_3" class="md-nav__link">
    <span class="md-ellipsis">
      Solution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lessons-learned_5" class="md-nav__link">
    <span class="md-ellipsis">
      Lessons Learned
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#challenge-7-certificate-management-lets-encrypt" class="md-nav__link">
    <span class="md-ellipsis">
      Challenge 7: Certificate Management (Let's Encrypt)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Challenge 7: Certificate Management (Let&#39;s Encrypt)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-problem_6" class="md-nav__link">
    <span class="md-ellipsis">
      The Problem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-modes-encountered" class="md-nav__link">
    <span class="md-ellipsis">
      Failure Modes Encountered
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#solution_4" class="md-nav__link">
    <span class="md-ellipsis">
      Solution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rate-limit-recovery" class="md-nav__link">
    <span class="md-ellipsis">
      Rate Limit Recovery
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lessons-learned_6" class="md-nav__link">
    <span class="md-ellipsis">
      Lessons Learned
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#patterns-and-best-practices-discovered" class="md-nav__link">
    <span class="md-ellipsis">
      Patterns and Best Practices Discovered
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Patterns and Best Practices Discovered">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-layered-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      1. Layered Deployment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-configuration-hierarchy" class="md-nav__link">
    <span class="md-ellipsis">
      2. Configuration Hierarchy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-health-checks" class="md-nav__link">
    <span class="md-ellipsis">
      3. Health Checks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-rollback-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      4. Rollback Strategy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-secret-provisioning" class="md-nav__link">
    <span class="md-ellipsis">
      5. Secret Provisioning
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-would-we-do-differently" class="md-nav__link">
    <span class="md-ellipsis">
      What Would We Do Differently?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What Would We Do Differently?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-database-from-day-one" class="md-nav__link">
    <span class="md-ellipsis">
      1. Database from Day One
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-simpler-storage" class="md-nav__link">
    <span class="md-ellipsis">
      2. Simpler Storage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-better-secret-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      3. Better Secret Strategy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-routing-design" class="md-nav__link">
    <span class="md-ellipsis">
      4. Routing Design
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-documentation-as-we-go" class="md-nav__link">
    <span class="md-ellipsis">
      5. Documentation as We Go
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-testing-environments" class="md-nav__link">
    <span class="md-ellipsis">
      6. Testing Environments
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#critical-success-factors" class="md-nav__link">
    <span class="md-ellipsis">
      Critical Success Factors
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../GIT_HISTORY_ANALYSIS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Git History Analysis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CLAUDE_CONVERSATIONS_SUMMARY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Claude Conversations Summary
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CLAUDE_CONVERSATION_ANALYSIS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Claude Conversation Analysis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../TECHNICAL_CHALLENGES_FROM_CLAUDE_CONVERSATIONS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Technical Challenges from Claude
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_3_4_6" >
        
          
          <label class="md-nav__link" for="__nav_2_4_3_4_6" id="__nav_2_4_3_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Meta Documentation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_4_3_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_3_4_6">
            <span class="md-nav__icon md-icon"></span>
            Meta Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DOCUMENTATION_REVIEW_RECOMMENDATIONS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Documentation Review
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../TRANSFER_INSTRUCTIONS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Transfer Instructions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_3_4_7" >
        
          
          <label class="md-nav__link" for="__nav_2_4_3_4_7" id="__nav_2_4_3_4_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Templates
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_4_3_4_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_3_4_7">
            <span class="md-nav__icon md-icon"></span>
            Templates
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INCIDENT_POSTMORTEM_TEMPLATE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Incident Postmortem Template
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4_4" id="__nav_2_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Features and Designs
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_4">
            <span class="md-nav__icon md-icon"></span>
            Features and Designs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../features-and-designs/sprocket-v2-unified-matchmaking-proposal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sprocket v2 Unified Matchmaking
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../marketing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Marketing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../production/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Production
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#challenge-1-vault-bootstrapping-and-unsealing" class="md-nav__link">
    <span class="md-ellipsis">
      Challenge 1: Vault Bootstrapping and Unsealing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Challenge 1: Vault Bootstrapping and Unsealing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-problem" class="md-nav__link">
    <span class="md-ellipsis">
      The Problem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#symptoms" class="md-nav__link">
    <span class="md-ellipsis">
      Symptoms
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evolution-through-commits" class="md-nav__link">
    <span class="md-ellipsis">
      Evolution Through Commits
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#solution" class="md-nav__link">
    <span class="md-ellipsis">
      Solution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lessons-learned" class="md-nav__link">
    <span class="md-ellipsis">
      Lessons Learned
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#challenge-2-database-management-vs-managed-services" class="md-nav__link">
    <span class="md-ellipsis">
      Challenge 2: Database Management vs. Managed Services
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Challenge 2: Database Management vs. Managed Services">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-problem_1" class="md-nav__link">
    <span class="md-ellipsis">
      The Problem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-decision-point" class="md-nav__link">
    <span class="md-ellipsis">
      The Decision Point
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-solution" class="md-nav__link">
    <span class="md-ellipsis">
      The Solution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#impact" class="md-nav__link">
    <span class="md-ellipsis">
      Impact
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lessons-learned_1" class="md-nav__link">
    <span class="md-ellipsis">
      Lessons Learned
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#challenge-3-storage-backend-evolution-minio-s3" class="md-nav__link">
    <span class="md-ellipsis">
      Challenge 3: Storage Backend Evolution (MinIO → S3)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Challenge 3: Storage Backend Evolution (MinIO → S3)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-problem_2" class="md-nav__link">
    <span class="md-ellipsis">
      The Problem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timeline" class="md-nav__link">
    <span class="md-ellipsis">
      Timeline
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#solution_1" class="md-nav__link">
    <span class="md-ellipsis">
      Solution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lessons-learned_2" class="md-nav__link">
    <span class="md-ellipsis">
      Lessons Learned
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#challenge-4-routing-complexity-localhost-lan-cloud" class="md-nav__link">
    <span class="md-ellipsis">
      Challenge 4: Routing Complexity (Localhost, LAN, Cloud)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Challenge 4: Routing Complexity (Localhost, LAN, Cloud)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-problem_3" class="md-nav__link">
    <span class="md-ellipsis">
      The Problem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#symptoms_1" class="md-nav__link">
    <span class="md-ellipsis">
      Symptoms
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evolution" class="md-nav__link">
    <span class="md-ellipsis">
      Evolution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#solution_2" class="md-nav__link">
    <span class="md-ellipsis">
      Solution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lessons-learned_3" class="md-nav__link">
    <span class="md-ellipsis">
      Lessons Learned
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#challenge-5-secret-management-across-vault-and-doppler" class="md-nav__link">
    <span class="md-ellipsis">
      Challenge 5: Secret Management Across Vault and Doppler
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Challenge 5: Secret Management Across Vault and Doppler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-problem_4" class="md-nav__link">
    <span class="md-ellipsis">
      The Problem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#challenges" class="md-nav__link">
    <span class="md-ellipsis">
      Challenges
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#solution-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Solution Architecture
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secret-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Secret Flow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lessons-learned_4" class="md-nav__link">
    <span class="md-ellipsis">
      Lessons Learned
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#challenge-6-service-discovery-and-traefik-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Challenge 6: Service Discovery and Traefik Integration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Challenge 6: Service Discovery and Traefik Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-problem_5" class="md-nav__link">
    <span class="md-ellipsis">
      The Problem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#symptoms_2" class="md-nav__link">
    <span class="md-ellipsis">
      Symptoms
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#root-causes" class="md-nav__link">
    <span class="md-ellipsis">
      Root Causes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#solution_3" class="md-nav__link">
    <span class="md-ellipsis">
      Solution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lessons-learned_5" class="md-nav__link">
    <span class="md-ellipsis">
      Lessons Learned
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#challenge-7-certificate-management-lets-encrypt" class="md-nav__link">
    <span class="md-ellipsis">
      Challenge 7: Certificate Management (Let's Encrypt)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Challenge 7: Certificate Management (Let&#39;s Encrypt)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-problem_6" class="md-nav__link">
    <span class="md-ellipsis">
      The Problem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-modes-encountered" class="md-nav__link">
    <span class="md-ellipsis">
      Failure Modes Encountered
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#solution_4" class="md-nav__link">
    <span class="md-ellipsis">
      Solution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rate-limit-recovery" class="md-nav__link">
    <span class="md-ellipsis">
      Rate Limit Recovery
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lessons-learned_6" class="md-nav__link">
    <span class="md-ellipsis">
      Lessons Learned
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#patterns-and-best-practices-discovered" class="md-nav__link">
    <span class="md-ellipsis">
      Patterns and Best Practices Discovered
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Patterns and Best Practices Discovered">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-layered-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      1. Layered Deployment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-configuration-hierarchy" class="md-nav__link">
    <span class="md-ellipsis">
      2. Configuration Hierarchy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-health-checks" class="md-nav__link">
    <span class="md-ellipsis">
      3. Health Checks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-rollback-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      4. Rollback Strategy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-secret-provisioning" class="md-nav__link">
    <span class="md-ellipsis">
      5. Secret Provisioning
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-would-we-do-differently" class="md-nav__link">
    <span class="md-ellipsis">
      What Would We Do Differently?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What Would We Do Differently?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-database-from-day-one" class="md-nav__link">
    <span class="md-ellipsis">
      1. Database from Day One
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-simpler-storage" class="md-nav__link">
    <span class="md-ellipsis">
      2. Simpler Storage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-better-secret-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      3. Better Secret Strategy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-routing-design" class="md-nav__link">
    <span class="md-ellipsis">
      4. Routing Design
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-documentation-as-we-go" class="md-nav__link">
    <span class="md-ellipsis">
      5. Documentation as We Go
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-testing-environments" class="md-nav__link">
    <span class="md-ellipsis">
      6. Testing Environments
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#critical-success-factors" class="md-nav__link">
    <span class="md-ellipsis">
      Critical Success Factors
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="technical-challenges-and-solutions">Technical Challenges and Solutions</h1>
<p>A detailed account of the major technical challenges encountered during the Sprocket infrastructure deployment and how they were resolved.</p>
<p><strong>Note</strong>: For operational troubleshooting procedures derived from Claude conversation history, see <a href="../TECHNICAL_CHALLENGES_FROM_CLAUDE_CONVERSATIONS/"><code>TECHNICAL_CHALLENGES_FROM_CLAUDE_CONVERSATIONS.md</code></a> and the troubleshooting section in <a href="../OPERATIONS_RUNBOOK/#troubleshooting-guide-from-development-experience"><code>OPERATIONS_RUNBOOK.md</code></a>.</p>
<h2 id="challenge-1-vault-bootstrapping-and-unsealing">Challenge 1: Vault Bootstrapping and Unsealing</h2>
<h3 id="the-problem">The Problem</h3>
<p>Vault requires initialization and unsealing on first start, but the unseal keys need to be stored securely and used automatically on subsequent deployments. This created a chicken-and-egg problem:
- Can't provision secrets without Vault being unsealed
- Can't unseal Vault without having the unseal keys
- Can't make deployment repeatable without automating unseal process</p>
<h3 id="symptoms">Symptoms</h3>
<ul>
<li>Vault container would start but be sealed</li>
<li>Services couldn't retrieve secrets from Vault</li>
<li>Manual unsealing required after every deployment</li>
<li>Unseal tokens stored inconsistently</li>
</ul>
<h3 id="evolution-through-commits">Evolution Through Commits</h3>
<ol>
<li><strong>Sept 17-18</strong>: Initial Vault deployment issues</li>
<li>Commit <code>5de5d04</code>: "bootstrapping problems with minio and other vault secrets"</li>
<li>
<p>Vault wouldn't stay accessible</p>
</li>
<li>
<p><strong>Sept 18</strong>: Localhost access achieved</p>
</li>
<li>Commit <code>cde2961</code>: "Accessing vault now works on localhost"</li>
<li>
<p>But still manual process</p>
</li>
<li>
<p><strong>Sept 19</strong>: Breakthrough on automation</p>
</li>
<li>Commit <code>5057afc</code>: "vault actually unseals!"</li>
<li>Auto-unseal script working</li>
<li>
<p>Commit <code>346c2a9</code>: Documentation of learnings</p>
</li>
<li>
<p><strong>Sept 19</strong>: Still polishing</p>
</li>
<li>Commit <code>fff0c3c</code>: "still polishing layer_1 to be repeatable"</li>
<li>
<p>Making the process truly repeatable</p>
</li>
<li>
<p><strong>Sept 21</strong>: Final solution</p>
</li>
<li>Commit <code>2103358</code>: "all tokens working now. Vault should be good!"</li>
<li>Automated unseal process complete</li>
</ol>
<h3 id="solution">Solution</h3>
<ol>
<li>
<p><strong>Initialization Script</strong>: Created script to detect if Vault is initialized
   <code>bash
   # Check if unseal_tokens.txt exists
   if [ ! -f "unseal_tokens.txt" ]; then
     vault operator init &gt; unseal_tokens.txt
   fi</code></p>
</li>
<li>
<p><strong>Auto-unseal Process</strong>: Script reads unseal keys and unseals Vault
   <code>bash
   # Extract unseal keys and unseal
   grep 'Unseal Key' unseal_tokens.txt | awk '{print $4}' | head -3 | while read key; do
     vault operator unseal $key
   done</code></p>
</li>
<li>
<p><strong>Persistence</strong>: Store unseal tokens securely (not in git)</p>
</li>
<li>Added to <code>.gitignore</code></li>
<li>
<p>Documented where to find them</p>
</li>
<li>
<p><strong>S3 Backend</strong>: Vault state persists to Digital Ocean Spaces</p>
</li>
<li>Survives container restarts</li>
<li>Shared across deployments</li>
</ol>
<h3 id="lessons-learned">Lessons Learned</h3>
<ul>
<li>Vault unsealing cannot be fully automated without cloud auto-unseal (which requires cloud KMS)</li>
<li>Store unseal keys securely but accessibly for automation</li>
<li>Test initialization process from scratch multiple times</li>
<li>Document the manual recovery process for when automation fails</li>
</ul>
<hr />
<h2 id="challenge-2-database-management-vs-managed-services">Challenge 2: Database Management vs. Managed Services</h2>
<h3 id="the-problem_1">The Problem</h3>
<p>Initially PostgreSQL was deployed as a Docker service managed by Pulumi. This created several issues:
- Data persistence concerns with Docker volumes
- Backup/restore complexity
- Resource management on single node
- No built-in high availability
- Manual maintenance required</p>
<h3 id="the-decision-point">The Decision Point</h3>
<p><strong>Key Question</strong>: Should we manage PostgreSQL ourselves or use a managed service?</p>
<p><strong>Trade-offs</strong>:
| Self-Managed | Managed Service (Digital Ocean) |
|--------------|--------------------------------|
| Full control | Less control |
| No extra cost | Monthly cost |
| Complex backups | Automated backups |
| Manual scaling | Easy scaling |
| Single point of failure | High availability |
| DIY maintenance | Managed updates |</p>
<h3 id="the-solution">The Solution</h3>
<p><strong>November 1-3, 2025</strong>: Migrated to Digital Ocean Managed PostgreSQL</p>
<p><strong>Implementation Steps</strong>:
1. Created managed PostgreSQL cluster on Digital Ocean
2. Updated all Pulumi configs with new connection details:
   - <code>postgres-host: sprocketbot-postgres-d5033d2-do-user-24528890-0.j.db.ondigitalocean.com</code>
   - <code>postgres-port: 25060</code>
3. Removed PostgreSQL service from <code>layer_2</code>
4. Updated all service providers to connect to external database
5. Migrated data from old PostgreSQL to managed instance
6. Updated <code>SprocketPostgresProvider</code> to support external connections</p>
<p><strong>Code Changes</strong>:
- Removed local PostgreSQL service definition
- Updated connection strings across all services
- Modified provider to set <code>superuser=false</code> for managed DB
- Removed PostgreSQL-specific Docker networks</p>
<h3 id="impact">Impact</h3>
<p>✅ <strong>Positive</strong>:
- Automated daily backups with 7-day retention
- Point-in-time recovery capability
- Better performance (dedicated resources)
- Reduced maintenance burden
- Professional-grade reliability</p>
<p>⚠️ <strong>Considerations</strong>:
- Monthly cost added to infrastructure
- External dependency (requires internet connectivity)
- Less flexibility for database-specific tuning
- Vendor lock-in to Digital Ocean</p>
<h3 id="lessons-learned_1">Lessons Learned</h3>
<ul>
<li><strong>Don't manage databases in production unless you have to</strong></li>
<li>Managed services are worth the cost for critical data stores</li>
<li>Plan data migration carefully (backup before, verify after)</li>
<li>Update all connection configs in one atomic change</li>
<li>Document external dependencies clearly</li>
</ul>
<hr />
<h2 id="challenge-3-storage-backend-evolution-minio-s3">Challenge 3: Storage Backend Evolution (MinIO → S3)</h2>
<h3 id="the-problem_2">The Problem</h3>
<p>Initially used MinIO for S3-compatible object storage, deployed as a Docker service. Issues encountered:
- MinIO required significant resources
- Vault S3 backend had stability issues with self-hosted MinIO
- Additional service to maintain
- Backup complexity for MinIO data itself</p>
<h3 id="timeline">Timeline</h3>
<ol>
<li><strong>Early deployment</strong>: MinIO for all S3 needs</li>
<li><strong>Sept 30</strong> (commit <code>3f32a74</code>): Began migration to cloud S3</li>
<li>"migrate to cloud S3 and fix service configurations"</li>
<li>Updated <code>SprocketMinioProvider</code> to support direct credentials</li>
<li><strong>Oct 8</strong> (commit <code>3b45f27</code>): Completed migration</li>
<li>"Move from MinIO to AWS. Remove postgres network."</li>
<li>Removed MinIO service entirely</li>
</ol>
<h3 id="solution_1">Solution</h3>
<ol>
<li><strong>Phase 1</strong>: Dual operation</li>
<li>Kept MinIO running</li>
<li>Migrated Vault to Digital Ocean Spaces</li>
<li>
<p>Tested stability</p>
</li>
<li>
<p><strong>Phase 2</strong>: Service migration</p>
</li>
<li>Updated application services to use cloud S3</li>
<li>Migrated existing data</li>
<li>
<p>Verified all services working</p>
</li>
<li>
<p><strong>Phase 3</strong>: Cleanup</p>
</li>
<li>Removed MinIO service definition</li>
<li>Removed MinIO-related configuration</li>
<li>Updated documentation</li>
</ol>
<p><strong>Configuration Changes</strong>:</p>
<pre><code class="language-yaml"># Old (MinIO)
s3-endpoint: minio.localhost
s3-access-key: local-minio-key
s3-secret-key: local-minio-secret

# New (Digital Ocean Spaces)
s3-endpoint: nyc3.digitaloceanspaces.com
s3-access-key: DO004ZHPV38R8C9Q46XG
s3-secret-key: [secure]
</code></pre>
<h3 id="lessons-learned_2">Lessons Learned</h3>
<ul>
<li>Cloud storage is more reliable than self-hosted for critical data</li>
<li>S3-compatible APIs make migration easier</li>
<li>Test storage backend changes thoroughly (Vault especially sensitive)</li>
<li>Migrate in phases to reduce risk</li>
</ul>
<hr />
<h2 id="challenge-4-routing-complexity-localhost-lan-cloud">Challenge 4: Routing Complexity (Localhost, LAN, Cloud)</h2>
<h3 id="the-problem_3">The Problem</h3>
<p>Need to support three different access patterns:
1. <strong>Local development</strong>: <code>.localhost</code> domains
2. <strong>LAN access</strong>: Direct IP (192.168.4.39)
3. <strong>Tailscale access</strong>: Tailscale IP (100.110.185.84)
4. <strong>Production cloud</strong>: Real domain (sprocket.mlesports.gg)</p>
<p>Each pattern requires different Traefik routing rules and certificate handling.</p>
<h3 id="symptoms_1">Symptoms</h3>
<ul>
<li>404 errors when accessing via different methods</li>
<li>Certificate warnings for localhost</li>
<li>Can't access from LAN using domain names</li>
<li>Duplicate router errors in Traefik</li>
</ul>
<h3 id="evolution">Evolution</h3>
<p><strong>Oct 27</strong> (commit <code>7486e02</code>): Major routing overhaul
- Added IP-based routing alongside hostname routing
- Created routing rules: <code>Host(\</code>sprocket.localhost`) || Host(`192.168.4.39`) || Host(`100.110.185.84`)`
- Documented differences between local and cloud deployments
- Created CLOUD_DEPLOYMENT.md and LOCAL_ACCESS.md</p>
<h3 id="solution_2">Solution</h3>
<p><strong>For Local Development</strong>:</p>
<pre><code class="language-typescript">// Platform.ts - Multi-mode routing
const hostRules = [];

// Hostname-based routing
if (hostname) {
  hostRules.push(`Host(\`${subdomain}.${hostname}\`)`);
}

// IP-based routing for LAN access
if (serverIp) {
  hostRules.push(`Host(\`${serverIp}\`)`);
}

// Tailscale routing
if (tailscaleIp) {
  hostRules.push(`Host(\`${tailscaleIp}\`)`);
}

const routingRule = hostRules.join(' || ');
</code></pre>
<p><strong>For Production</strong>:</p>
<pre><code class="language-yaml"># Pulumi config
hostname: sprocket.mlesports.gg
# Remove server-ip and tailscale-ip configs
</code></pre>
<p><strong>Traefik Configuration</strong>:
- Let's Encrypt for production domains
- Self-signed certs for localhost
- No cert verification for IP-based access</p>
<h3 id="lessons-learned_3">Lessons Learned</h3>
<ul>
<li><strong>Design for multiple access patterns from the start</strong></li>
<li>Document which config to use for which scenario</li>
<li>Test each access method independently</li>
<li>IP-based routing is a hack, use proper DNS when possible</li>
<li><code>/etc/hosts</code> modifications work for local testing</li>
</ul>
<hr />
<h2 id="challenge-5-secret-management-across-vault-and-doppler">Challenge 5: Secret Management Across Vault and Doppler</h2>
<h3 id="the-problem_4">The Problem</h3>
<p>Secrets scattered across multiple sources:
- Some in Pulumi config (encrypted)
- Some in Vault (retrieved by services)
- Some in Doppler (primary source of truth)
- Manual secret provisioning steps</p>
<h3 id="challenges">Challenges</h3>
<ol>
<li><strong>Bootstrapping</strong>: Need secrets to initialize Vault, but Vault stores secrets</li>
<li><strong>Service Configuration</strong>: Services need Vault address before Vault exists</li>
<li><strong>OAuth Credentials</strong>: Multiple providers with different secret formats</li>
<li><strong>Rotation</strong>: How to update secrets across all systems</li>
</ol>
<h3 id="solution-architecture">Solution Architecture</h3>
<p><strong>1. Doppler as Source of Truth</strong>:
- All secrets stored in Doppler project
- Categories:
  - OAuth (Google, Discord, Epic, Steam)
  - API tokens (Ballchasing)
  - Database credentials
  - SMTP settings
  - Application secrets</p>
<p><strong>2. Pulumi for Infrastructure Secrets</strong>:</p>
<pre><code class="language-yaml"># Only infrastructure-level secrets in Pulumi
docker-access-token: [secure]
vault-s3-secret-key: [secure]
postgres-password: [secure]
</code></pre>
<p><strong>3. Vault for Application Secrets</strong>:
- Services retrieve secrets at runtime
- Vault policies control access
- GitHub teams map to Vault policies</p>
<p><strong>4. Bootstrap Process</strong>:</p>
<pre><code class="language-bash"># scripts/bootstrap-vault-secrets.sh
1. Load secrets from Doppler
2. Wait for Vault to be unsealed
3. Provision secrets to Vault paths:
   - platform/{env}/manual/oauth/*
   - platform/ballchasing
   - platform/{env}/chatwoot
</code></pre>
<h3 id="secret-flow">Secret Flow</h3>
<pre><code>Doppler (Source of Truth)
    ↓
Bootstrap Script
    ↓
Vault (Runtime Storage)
    ↓
Application Services
</code></pre>
<h3 id="lessons-learned_4">Lessons Learned</h3>
<ul>
<li><strong>Centralize secret source of truth</strong> (Doppler)</li>
<li>Use Vault for runtime secret distribution</li>
<li>Keep infrastructure secrets in Pulumi config</li>
<li>Document secret bootstrap process clearly</li>
<li><strong>Never commit secrets to git</strong> (even encrypted ones are risky)</li>
<li>Automate secret provisioning to reduce human error</li>
</ul>
<hr />
<h2 id="challenge-6-service-discovery-and-traefik-integration">Challenge 6: Service Discovery and Traefik Integration</h2>
<h3 id="the-problem_5">The Problem</h3>
<p>Docker Swarm services need to be automatically discovered by Traefik and routed correctly, but:
- Services may not be ready when Traefik starts
- Labels need to be precisely configured
- Multiple services on same port need different routing
- TLS termination complexity</p>
<h3 id="symptoms_2">Symptoms</h3>
<ul>
<li>404 errors even though services are running</li>
<li>Traefik dashboard shows no routers</li>
<li>Services visible in <code>docker service ls</code> but not accessible</li>
<li>Duplicate router errors</li>
</ul>
<h3 id="root-causes">Root Causes</h3>
<ol>
<li><strong>Orphaned Service Tasks</strong>: Old service versions not cleaned up</li>
<li><strong>Label Syntax Errors</strong>: Traefik label typos or incorrect values</li>
<li><strong>Network Misconfiguration</strong>: Services not on ingress network</li>
<li><strong>Timing Issues</strong>: Traefik caches configuration</li>
</ol>
<h3 id="solution_3">Solution</h3>
<p><strong>1. Proper Service Labels</strong>:</p>
<pre><code class="language-typescript">// In service definition
labels: {
  'traefik.enable': 'true',
  'traefik.http.routers.sprocket-web.rule': `Host(\`sprocket.${hostname}\`)`,
  'traefik.http.routers.sprocket-web.entrypoints': 'websecure',
  'traefik.http.routers.sprocket-web.tls': 'true',
  'traefik.http.routers.sprocket-web.tls.certresolver': 'letsencrypt',
  'traefik.http.services.sprocket-web.loadbalancer.server.port': '3000',
}
</code></pre>
<p><strong>2. Network Configuration</strong>:</p>
<pre><code class="language-typescript">// Ensure service is on ingress network
networks: ['ingress']
</code></pre>
<p><strong>3. Cleanup Procedure</strong>:</p>
<pre><code class="language-bash"># Remove orphaned tasks
docker service update --force &lt;service-name&gt;

# Or full cleanup
docker service rm &lt;service-name&gt;
pulumi up  # Recreate
</code></pre>
<p><strong>4. Verification</strong>:</p>
<pre><code class="language-bash"># Check Traefik sees the service
docker exec $(docker ps -q -f name=traefik) \
  wget -qO- http://localhost:8080/api/http/routers | jq
</code></pre>
<h3 id="lessons-learned_5">Lessons Learned</h3>
<ul>
<li><strong>Always verify network membership</strong></li>
<li>Use consistent label naming scheme</li>
<li>Test with Traefik dashboard/API</li>
<li>Force update services when routing changes</li>
<li>Give Traefik 30-60 seconds for discovery</li>
</ul>
<hr />
<h2 id="challenge-7-certificate-management-lets-encrypt">Challenge 7: Certificate Management (Let's Encrypt)</h2>
<h3 id="the-problem_6">The Problem</h3>
<p>Need automatic TLS certificates for production, but:
- Let's Encrypt requires public DNS
- Rate limits prevent excessive testing
- Localhost can't get real certificates
- Certificate renewal must be automatic</p>
<h3 id="failure-modes-encountered">Failure Modes Encountered</h3>
<ol>
<li><strong>Rate Limiting</strong>: Too many cert requests during testing</li>
<li><strong>DNS Not Ready</strong>: Requesting certs before DNS propagates</li>
<li><strong>Challenge Failures</strong>: HTTP-01 challenge can't reach server</li>
<li><strong>Mixed Local/Prod</strong>: Using production config locally</li>
</ol>
<h3 id="solution_4">Solution</h3>
<p><strong>For Production</strong>:</p>
<pre><code class="language-yaml"># Traefik configuration
--certificatesresolvers.letsencrypt.acme.email=admin@example.com
--certificatesresolvers.letsencrypt.acme.storage=/letsencrypt/acme.json
--certificatesresolvers.letsencrypt.acme.httpchallenge.entrypoint=web
</code></pre>
<p><strong>For Local Development</strong>:
- Use Traefik's default self-signed certificates
- Accept certificate warnings in browser
- Don't configure Let's Encrypt resolver</p>
<p><strong>For Testing</strong>:</p>
<pre><code class="language-yaml"># Use Let's Encrypt staging
--certificatesresolvers.letsencrypt.acme.caserver=https://acme-staging-v02.api.letsencrypt.org/directory
</code></pre>
<h3 id="rate-limit-recovery">Rate Limit Recovery</h3>
<p>When hit with rate limits:
1. Wait 1 hour (soft limit resets)
2. Use staging environment for testing
3. Verify DNS before requesting prod certs
4. Consolidate to wildcard cert if possible</p>
<h3 id="lessons-learned_6">Lessons Learned</h3>
<ul>
<li><strong>Test with Let's Encrypt staging first</strong></li>
<li>Verify DNS propagation before cert requests</li>
<li>One cert provisioning attempt can take 60+ seconds</li>
<li>Persistent storage crucial (don't lose acme.json)</li>
<li>Rate limits are per domain, plan accordingly</li>
</ul>
<hr />
<h2 id="patterns-and-best-practices-discovered">Patterns and Best Practices Discovered</h2>
<h3 id="1-layered-deployment">1. Layered Deployment</h3>
<p><strong>Pattern</strong>: Deploy infrastructure in dependency order</p>
<pre><code>Layer 1 (Foundation) → Layer 2 (Data) → Platform (Apps)
</code></pre>
<p><strong>Why</strong>: Each layer depends on previous layers being healthy</p>
<h3 id="2-configuration-hierarchy">2. Configuration Hierarchy</h3>
<p><strong>Pattern</strong>: Environment-specific config overrides</p>
<pre><code>Global defaults → Stack config → Environment variables → Doppler
</code></pre>
<h3 id="3-health-checks">3. Health Checks</h3>
<p><strong>Pattern</strong>: Verify each layer before proceeding</p>
<pre><code class="language-bash"># After each layer
1. Check service status: docker service ls
2. Check service logs: docker service logs &lt;name&gt;
3. Verify connectivity: curl https://endpoint
4. Check Traefik routes: query Traefik API
</code></pre>
<h3 id="4-rollback-strategy">4. Rollback Strategy</h3>
<p><strong>Pattern</strong>: Keep previous working state</p>
<pre><code class="language-bash"># Before major changes
1. Document current state
2. Export Pulumi stack: pulumi stack export &gt; backup.json
3. Tag git commit
4. Test rollback procedure
</code></pre>
<h3 id="5-secret-provisioning">5. Secret Provisioning</h3>
<p><strong>Pattern</strong>: Separate secret sources by use case</p>
<pre><code>Infrastructure secrets → Pulumi config
Application secrets → Vault (from Doppler)
Temporary tokens → Vault (generated)
</code></pre>
<hr />
<h2 id="what-would-we-do-differently">What Would We Do Differently?</h2>
<h3 id="1-database-from-day-one">1. Database from Day One</h3>
<ul>
<li>Start with managed PostgreSQL instead of self-hosted</li>
<li>Saves time and complexity</li>
<li>Worth the cost</li>
</ul>
<h3 id="2-simpler-storage">2. Simpler Storage</h3>
<ul>
<li>Use cloud S3 from the beginning</li>
<li>Skip MinIO entirely</li>
<li>One less service to manage</li>
</ul>
<h3 id="3-better-secret-strategy">3. Better Secret Strategy</h3>
<ul>
<li>Establish Doppler → Vault flow earlier</li>
<li>Document secret paths from start</li>
<li>Create secret migration scripts</li>
</ul>
<h3 id="4-routing-design">4. Routing Design</h3>
<ul>
<li>Design for production first</li>
<li>Add development overrides later</li>
<li>Avoid IP-based routing hacks</li>
</ul>
<h3 id="5-documentation-as-we-go">5. Documentation as We Go</h3>
<ul>
<li>Document decisions when making them</li>
<li>Keep architectural decision records (ADRs)</li>
<li>Don't rely on commit messages alone</li>
</ul>
<h3 id="6-testing-environments">6. Testing Environments</h3>
<ul>
<li>Separate dev/staging/prod stacks earlier</li>
<li>Use Let's Encrypt staging for testing</li>
<li>Create reproducible test environments</li>
</ul>
<hr />
<h2 id="critical-success-factors">Critical Success Factors</h2>
<p>What made this deployment eventually successful:</p>
<ol>
<li><strong>Persistence</strong>: Many iterations to get it right</li>
<li><strong>Git History</strong>: Detailed commit messages helped track changes</li>
<li><strong>Incremental Changes</strong>: Small commits, test often</li>
<li><strong>External Services</strong>: Managed DB and storage reduced complexity</li>
<li><strong>Community Tools</strong>: Pulumi, Traefik, Vault well-documented</li>
<li><strong>Automation</strong>: Scripts for repeatable processes</li>
<li><strong>Documentation</strong>: Writing things down as we learned</li>
</ol>
<p>The journey from first commit to production took months, but the result is a robust, maintainable infrastructure.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../../../..", "features": [], "search": "../../../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>